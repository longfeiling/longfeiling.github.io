## 浏览器渲染分为几步
1. javascript  javascript实现动画效果，DOM元素操作
2. style 确认每一个DOM元素是用什么css规则
3. layout 计算每一个DOM元素在屏幕上的显示的大小和位置。由于元素布局是相对的，所以，每次任意一个元素发生变化，都会联动其他元素发生变化，这个过程称为reflow
4. paint  在多个层上绘制DOM元素的文字，颜色，图像，边框和阴影等
5. composite ： （渲染层合并） 按照合理的顺序合并图层显示到屏幕上


### javascript 执行效率优化
1. 避免使用setTimeout 和 setInterval 的使用，尽量使用requestAnimationFrame()
setTimeout 和 setInterval 无法保证callback 的执行时机，有可能在帧结束才执行，从而导致掉帧
  window.requestAnimationFrame(): 该方法是告诉浏览器您希望请求执行动画并请求浏览器调用指定函数在下一次重绘之前更新动画，使用一个回调函数作为参数，这个回调函数会在浏览器重绘之前执行
2.



### script标签的工作原理
1. 浏览器一边下载html网页，一边开始解析
2. 解析过程中，发现script标签
3. 暂停渲染，网页渲染的控制权交给javascript引擎
4. 如果script标签引用了外部文件，就下载文件，否则就直接执行
5. 执行完毕，控制权交还给渲染引擎，恢复下面html网页的解析

在浏览器遇到多个script标签引用外部文件，浏览器会并行下载这些外部文件，下载完成后会按照顺序来执行这些外部文件，即使后面的文件比前面的文件先下载完成

#### defer 属性
defer属性是用来解决脚本文件下载阻塞网页渲染的问题，script中加了这个属性之后，就会等到网页DOM都加载完成之后，才会执行js
defer的运行过程如下
1. 浏览器开始执行html网页
2. 解析过程中，遇到带有defer属性的script标签
3. 浏览器继续往下解析浏览器网页，同时并行下载script标签中的外部文件
4. 浏览器完成解析html网页，此时再执行下载的脚本





## 参考文章
* https://www.jianshu.com/p/a32b890c29b1