
## 浏览器的渲染机制
1. 浏览器将获得的html代码解析成dom树，Dom树包含所有的html标签，包括display: none，js动态加载的元素等。
2. 浏览器把所有的css样式解析为样式解构体。
3. 通过dom tree 和 样式解构体 进行定位坐标和大小，这个过程称为flow和layout
4. 最终通过调用native GUI的api绘制页面的过程称为paint


## 重绘和回流
当用户在浏览网页是进行的交互或者通过js脚本改变页面结构的时候，页面要重新渲染，次此过程称为重绘或者回流。
回流：是指dom树发生结构的变化，需要重新构建dom结构。
重绘：是指dom节点样式改变，重新绘制
回流一定会引起重绘，重绘不一定引起回流。

## 回流什么时候会发生：
当页面布局和几何属性发生改变的时候就需要回流。以下情况会发生回流：
1. 添加或者删除可见的元素
2. 元素位置的改变
3. 元素尺寸的改变--边距，填充，边框，宽度和高度
4. 元素内容的改变——比如文本改变或者图片大小而引起的计算值宽度和高度的改变
5. 页面初始化渲染
6. 浏览器窗口尺寸的改变——resize事件的发生

## 如何减少浏览器回流：
减少回流，重绘其实就是减少对渲染树的操作（合并多次dom和样式的修改），并减少对一些style信息的请求。
将需要多次重排的元素，position属性设置为absolute或者是fixed,这样子元素就脱离文档流，他的变化不会影响到其他元素。
1. 直接改变className，如果动态改变样式，则使用cssText
2. 让要操作的元素进行“离线处理”，处理完之后一起更新
  * 使用domcumentFragment进行缓存操作，引起一次重绘和回流
  * 使用display:none技术，只引发两次回流和重绘
  * 使用cloneNode和replaceChild，引发一次重绘和回流
3. 不要经常访问会引起浏览器flush队列的属性，如果确实要访问，利用缓存
```
// 不要这样子写
for(循环) {
  el.style.left = el.offsetLeft + 5 + 'px';
  el.style.top = el.offsetTop + 5 + 'px';
}

// 这样写好点
var left = el.offsetLeft,
    top = eloffsetTop,
    s = el.style;
for(循环) {
  left = += 10;
  top += 10;
  s.left = left + 'px';
}
```
4. 让元素脱离文档流，减少回流的render tree的规模